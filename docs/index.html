
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=EUC-JP" />
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="expires" content="0">

<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta name="copyright" content="Copyright XSERVER Inc." />
<meta name="robots" content="INDEX,FOLLOW" />
<title>テストページ</title>
<style type="text/css">

* {
	margin : 0 ;
	padding : 0 ;
	font-size : 100% ;
}

body {
	font-size : 75% ;
	/*text-align : center ;*/
	font-family:"ＭＳ Ｐゴシック", Osaka, "ヒラギノ角ゴ Pro W3" ;
	line-height : 1.4 ;
	background: #42cbf5;
}

#container {
	/*width : 540px ;
	margin : 15px auto 30px ;*/
}

#container #header {
	width : 540px ;
	height : 52px ;
	/*background : url(default_page.png) 0 0 no-repeat ;*/
}

#container #header a {
	display : block ;
	text-indent : -500em ;
	overflow : hidden ;
	width : 292px ;
	height : 40px ;
	margin : 0 auto ;
}

#container dl#contents {
	height : 108px ;
	margin-bottom : 8px ;
	/*background : url(default_page.png) left bottom no-repeat ;*/
}

dl#contents dt {
	width : 540px ;
	/*text-align : center ;*/
	line-height : 30px ;
	height : 30px ;
	font-weight : bold ;
	font-size : 115% ;
}

dl#contents dd {
	text-align : left ;
	padding : 8px 12px ;
	position : relative ;
}

dl#contents dd #message {
	position : absolute ;
	top : 50px ;
	left : 30px ;
}

address {
	font-style : normal ;
}
</style>
<script type='text/javascript' src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>
    $(function(){
      $('#btnChild').on('click', function(){
				var message = JSON.stringify({
						"msg_id": "TOUCHMOVIE_RESUME_GET",
						"request_id": "20191015123045333",
						"crid":"1"
				});
        window.parent.postMessage(message,'*');
      });
    });
    $(function(){
      $('#btnStart').on('click', function(){
				var message = JSON.stringify({
					"msg_id": "TOUCHMOVIE_START",
					"request_id": "20191015123045333",
					"cid":"cid1",
					"lid":"lid1",
					"onetimeurl":"https://xxxxxxxxx",
					"end_option":{cid:"cid2",lid:"lid2"}
				});
        window.parent.postMessage(message,'*');
      });
    });
    $(function(){
      $('#btnMovie').on('click', function(){
				var message = JSON.stringify({
					"msg_id": "MOVIE_ONETIMEURL_GET",
					"request_id": "20191015123045333",
					"list":[{cid:"cid1",lid:"lid1"},{cid:"cid2",lid:"lid2"}]
				});
        window.parent.postMessage(message,'*');
      });
    });
    $(function(){
      $('#btnUpdate').on('click', function(){
				var message = JSON.stringify({
					"msg_id": "TOUCHMOVIE_RESUME_UPDATE",
					"request_id": "20191015123045333",
					"crid": "111111",
					"resume":{
                                            "contentType": "tig",
                                            "data": {
                                                "any": {}
                                            }
                                        }
				});
        window.parent.postMessage(message,'*');
      });
	});
    $(function(){
      $('#btnWindow').on('click', function(){
				var message = JSON.stringify({
					"msg_id": "TOUCHMOVIE_BROWSER_OPEN",
					"request_id": "20191015123045333",
					"url": "https://www.yahoo.co.jp/"
				});
        window.parent.postMessage(message,'*');
      });
	});
	$(function(){
      $('#btnclose').on('click', function(){
				var message = JSON.stringify({
					"msg_id": "TOUCHMOVIE_CLOSE",
					"request_id": "20191015123045333",
					"crid": "1111",
					"lid": "2222"
				});
        window.parent.postMessage(message,'*');
      });
	});
		window.addEventListener('message', function(event) {
    	alert(JSON.stringify(event.data));
		}, false);
	
	// バックグランドに行った時
	
	
document.addEventListener('deviceready', () => {
      // アプリがバックグラウンドにいった時にハンドリングするリスナーを登録
      if (pauseHandler === false) {
        this.pauseEventListner = (e:Event) => {
 				var message = JSON.stringify({
					"msg_id": "TOUCHMOVIE_BROWSER_OPEN",
					"request_id": "20191015123045333",
					"url": "https://www.yahoo.co.jp/"
				});
        };
        document.addEventListener('pause', this.pauseEventListner, false);
      }
    });
</script>
</head>
<body>

<div>
	<div>
		<div id="child">
			<br />
			<br />
			<br />
			<br />
    	<p>これはiframeのテストページです。</p><br /><br /><br /><br />
		<button id="btnChild">タッチムービーレジューム取得応答</button><br /><br />
		<button id="btnStart">タッチムービー視聴開始通知</button><br /><br />
		<button id="btnMovie">動画OneTimeURL取得通知</button><br /><br />
		<button id="btnUpdate">タッチムービーレジューム更新通知</button><br /><br />
		<button id="btnWindow">ウインドウオープン</button><br /><br />
		<button id="btnclose">タッチムービークローズ通知</button><br /><br /><br />
		
		<a href="lnpm://">アプリ起動</a>
		</div>
        <div>
		<p>iframeテストページ</p>
        </div>
	<!--//container--></div>
<!--//base--></div>

</body>
</html>
